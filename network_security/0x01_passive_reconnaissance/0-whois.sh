#!/bin/bash
whois $1 | awk '/^Registrant Name:/,/^Registrant Email:/ {split($0,a,": "); field=$1" "$2; gsub(":  ","",field); value=a[2]; if(/Street/) value=value" "; if(/Phone Ext/ || /Fax Ext/) field=field": "; print field","value} /^Admin Name:/,/^Admin Email:/ {split($0,a,":  "); field=$1" "$2; gsub(": ","",field); value=a[2]; if(/Street/) value=value" "; if(/Phone Ext/ || /Fax Ext/) field=field":"; print field","value} /^Tech Name:/,/^Tech Email:/ {split($0,a,": "); field=$1" "$2; gsub(": ","",field); value=a[2]; if(/Street/) value=value" "; if(/Phone Ext/ || /Fax Ext/) field=field":"; print field","value}' | awk 'NF' > $1.csv
